# Uploading Data

## Installing the Score-Client

To run the score-client using a Docker image, you need to provide specific environment variables including the Score server `STORAGE_URL`, the Song server `METADATA_URL`, and a valid `ACCESSTOKEN`.

Use the following templated command to run a Score Client docker container:

```bash
docker run -d --name score-client \
    -e ACCESSTOKEN=${token} \
    -e STORAGE_URL=${scoreServerUrl} \
    -e METADATA_URL=${songServerUrl} \
    --network="host" \
    --platform="linux/amd64" \
    --mount type=bind,source="$(pwd)",target=/output \
    ghcr.io/overture-stack/score:latest
```

Replace all placeholders `${}` with the appropriate values for your environment.

<details>

  <summary><b>Click here for a detailed breakdown</b></summary>

<br></br>

  - `-d` runs the container in detached mode, meaning it runs in the background and does not receive input or display output in the terminal.


  - `-e ACCESSTOKEN=${token}` will be the access token supplied by the platform's authorization and authentication service. For Overture, this will be Ego or Keycloak. API keys can be generated by users by logging into the front-end stage UI and navigating to their profile page.


  - `-e STORAGE_URL=${scoreServerUrl}` is the URL for the Score server that the Score-Client will interact with.


  - `-e METADATA_URL=${songServerUrl}` is the URL for the Song server that the Score-Client will interact with.


  - `--network="host"` uses the host network stack inside the container, bypassing the usual network isolation. This means the container shares the network namespace with the host machine.


  - `--platform="linux/amd64"` specifies the platform the container should emulate. In this case, it's set to linux/amd64, indicating the container is intended to run on a Linux system with an AMD64 architecture.


  - `--mount type=bind,source="$(pwd)",target=/output` mounts a directory of choice and its contents (volume) from the host machine to the container. Any changes made to the files in this directory will be reflected in both locations.

---

</details>
<br></br>


**Note:** For step-by-step instructions on installing and using the Song and Score clients, including downloading and uploading data, see our platform guides on [CLI submissions](https://www.overture.bio/documentation/guides/submission/clientsubmission/) and [CLI downloads](https://www.overture.bio/documentation/guides/download/clientdownload/).

## Uploading File Data

File uploads can be executed with the Score client's `upload` command.

The `upload` command offers various methods for uploading file data. The main methods are summarized below:

- `--file` option: Upload a particular file by specifying its path.
- `--manifest` option: Upload specific files using a manifest. This can be done by providing the manifest file ID, its URL, or the path to it.
- `--object-id` option: Upload a particular file by specifying its object ID.

Here are the different options available with the Score-Client `upload` command:

| Option | Description |
| -------| ------------|
| `--file` | Upload a particular file by specifying its path. |
| `--force` | Redownload the file if it already exists in the object storage, replacing the file in the repository. |
| `--manifest` | Upload specific files using a manifest by providing the manifest file ID, its URL, or the path to it. |
| `--md5` | MD5 checksum value of the file being uploaded. |
| `--object-id` | Upload a particular file by specifying its object ID. |
| `--validate` | If available, validate the file using its MD5 checksum. |
| `--verify-connection` | Initially, verify the connection to the object storage repository. |

For complete information on uploading data, including generating a manifest, check out our guide on [data submission using Song and Score](../../01-song/usage/01-submitting-data.md). The following example outlines uploading files using a previously created manifest file from Song:

### Upload Example

Here is an example of a song-client upload command using a previously generated manifest file from Song:

```bash
docker exec score-client sh -c "score-client upload --manifest ./<directory>/manifest.txt"
```

Replace `<directory>` with the location of the previously generated manifest file.

2. If successful, the Score client will indicate that the upload is complete. You'll see an output similar to:

```shell
Uploading object: '/home/ubuntu/songdata/input-files/example.vcf.gz.idx' using the object id e98daf88-fdf8-5a89-9803-9ebafb41de94
100% [##################################################]  Parts: 1/1, Checksum: 100%, Write/sec: 1000B/s, Read/sec: 0B/s
Finalizing...
Total execution time:         3.141 s
Total bytes read    :               0
Total bytes written :              24
Upload completed
Uploading object: '/home/ubuntu/songdata/input-files/example.vcf.gz' using the object id 440f4559-e905-55ec-bdeb-9518f823e287
100% [##################################################]  Parts: 1/1, Checksum: 100%, Write/sec: 7.8K/s, Read/sec: 0B/s
Finalizing...
Total execution time:         3.105 s
Total bytes read    :               0
Total bytes written :              52
Upload completed
```

:::tip
We have a comprehensive guide, with demo resources, covering [data submission and upload located here](https://www.overture.bio/documentation/guides/submission/clientsubmission/)
:::



